(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{53:function(e,t,r){},54:function(e,t,r){},55:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/male-user.a91eb893.png"},87:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),c=r(18),s=r.n(c),i=(r(53),r(11)),o=(r(54),r(55),r(12)),u=r(9),l=r(10),d=function(){return Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)("div",{className:"logo"})})},j=r(2),b=r.n(j),p=r(4),m=r(14),h=r.n(m),f=r(7),O=r.n(f),x={createNewUser:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("https://mytinerary-api.herokuapp.com/api/user/register",e);case 3:if(!(a=t.sent).data.success){t.next=9;break}return r({type:"LOGIN",payload:a.data.response}),t.abrupt("return",a.data.response);case 9:return t.abrupt("return",a.data);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),c={errores:{details:[{message:"An error occurred"}]}},t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}()},login_user:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("https://mytinerary-api.herokuapp.com/api/user/login",e);case 3:if(!(a=t.sent).data.success){t.next=9;break}return r({type:"LOGIN",payload:a.data.response}),t.abrupt("return",a.data.response);case 9:return t.abrupt("return",a.data);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),c={errores:{details:[{message:"An error occurred"}]}},t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}()},login_LS:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("https://mytinerary-api.herokuapp.com/api/user/verification",{token:e},{headers:{Authorization:"Bearer ".concat(e)}});case 3:(a=t.sent).data.success&&r({type:"LOGIN",payload:a.data.response}),t.next=18;break;case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0.response){t.next=17;break}if(401!==t.t0.response.status){t.next=15;break}return localStorage.clear(),O.a.fire("You are not authorized"),"/",t.abrupt("return","/");case 15:t.next=18;break;case 17:return t.abrupt("return",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()},logout_user:function(){return function(){var e=Object(p.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",payload:""});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}},g={logout_user:x.logout_user},y=Object(l.b)((function(e){return{loggedUser:e.user.loggedUser}}),g)((function(e){var t=r(80),c=e.loggedUser,s=e.logout_user,o=Object(a.useState)(!1),l=Object(i.a)(o,2),d=l[0],j=l[1];return Object(n.jsxs)("nav",{children:[Object(n.jsxs)("div",{className:"nav_buttons",children:[c&&Object(n.jsx)("p",{children:c.name}),Object(n.jsx)("div",{onClick:function(){return j(!d)},className:"user_pic btn_dropdown",style:{backgroundImage:"url(".concat(c?c.userPic:t.default,")"),backgroundSize:"cover",backgroundPosition:"center"}}),Object(n.jsxs)("div",{className:"links",children:[Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)("p",{children:"HOME"})}),Object(n.jsx)(u.b,{to:"/cities",children:Object(n.jsx)("p",{children:"CITIES"})})]})]}),d&&Object(n.jsxs)("div",{className:"dropdown_content",children:[Object(n.jsx)(u.b,{onClick:c&&s,to:"/login",children:Object(n.jsx)("p",{children:c?"Log Out":"Log In"})}),!c&&Object(n.jsx)(u.b,{to:"/register",children:Object(n.jsx)("p",{children:"Register"})})]})]})})),v=function(){return Object(n.jsxs)("header",{children:[Object(n.jsx)(d,{}),Object(n.jsx)(y,{})]})},k=function(){return Object(n.jsx)("div",{className:"next_page",children:Object(n.jsx)(u.b,{to:"/cities",children:Object(n.jsx)("img",{src:"../assets/departures2.jpg",alt:"cities"})})})},N=function(){return Object(n.jsxs)("div",{className:"slogan",children:[Object(n.jsx)("h3",{children:"Find your perfect trip, designed by insiders who know and love their cities"}),Object(n.jsx)(k,{})]})},C=r(26),w=function(e){var t=e.cities;return Object(n.jsx)("div",{className:"slides",children:t.map((function(e,t){return Object(n.jsx)("div",{className:"photo_slide",style:{backgroundImage:"url(../assets/".concat(e.url,")"),backgroundSize:"cover",backgroundPosition:"center",width:"50%",height:"50%"},children:Object(n.jsx)("h1",{children:e.title})},"".concat(t,"_photo"))}))})},_=(r(81),function(){var e=[{pictures:[{title:"New Delhi",url:"new-delhi.jpg"},{title:"Tokyo",url:"tokyo.jpg"},{title:"Dubai",url:"dubai.jpg"},{title:"Istanbul",url:"istanbul.jpg"}],title:"Asia"},{pictures:[{title:"Prague",url:"prague.jpg"},{title:"Rome",url:"rome.jpg"},{title:"Athens",url:"athens.jpg"},{title:"Paris",url:"paris.jpg"}],title:"Europe"},{pictures:[{title:"Rio de Janeiro",url:"rio-de-janeiro.jpg"},{title:"Buenos Aires",url:"buenos-aires.jpg"},{title:"New York",url:"new-york.jpg"},{title:"Cancun",url:"cancun.jpg"}],title:"America"}];return Object(n.jsxs)("div",{className:"PopularMYtineraries",children:[Object(n.jsx)("h2",{children:"Popular Mytineraries"}),Object(n.jsx)(C.a,{fade:!0,interval:3e3,children:e.map((function(e,t){return Object(n.jsxs)(C.a.Item,{children:[Object(n.jsx)(w,{cities:e.pictures}),Object(n.jsx)(C.a.Caption,{children:Object(n.jsx)("h2",{children:e.title})})]},"".concat(t,"_slide"))}))})]})}),I=function(){return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.jsxs)("div",{className:"home_page",children:[Object(n.jsx)(v,{}),Object(n.jsx)(N,{}),Object(n.jsx)(_,{})]})},L=function(e){var t=e.cities;return Object(n.jsx)("div",{className:"cities_list",children:t.map((function(e,t){var r=e.cityPic,a=e.cityName,c=e._id;return Object(n.jsx)(u.b,{to:"/itineraries/".concat(c),children:Object(n.jsx)("div",{className:"city",style:{backgroundImage:"url(".concat(r,")"),backgroundSize:"cover"},children:Object(n.jsx)("h4",{children:"".concat(a)})})},"".concat(t,"city"))}))})},S={getCities:function(){return function(){var e=Object(p.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://mytinerary-api.herokuapp.com/api/cities");case 3:return n=e.sent,t({type:"ALL_CITIES",payload:n.data.response}),e.abrupt("return",n.data.response);case 8:e.prev=8,e.t0=e.catch(0),setTimeout((function(){O.a.fire("Error, back to Home"),window.location.href="/"}),4e3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},addCity:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("https://mytinerary-api.herokuapp.com/api/cities",e);case 3:return a=t.sent,r({type:"NEW_CITY",payload:a.data}),t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}()},filterCities:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"FILTER_CITIES",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},getCityById:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"SINGLE_CITY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},setLoading:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"LOADING",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}},U=function(){var e="../assets/no_results.jpg",t="No results found";return Object(n.jsx)("div",{className:"cities_list",children:Object(n.jsx)("div",{className:"city",style:{backgroundImage:"url(".concat(e,")"),backgroundSize:"cover"},children:Object(n.jsx)("h4",{children:t})})})},A=r(24),E=r.n(A),P={getCities:S.getCities,filterCities:S.filterCities,setLoading:S.setLoading},T=Object(l.b)((function(e){return{newCities:e.city.filteredCities,loading:e.city.loading,loggedUser:e.user.loggedUser}}),P)((function(e){var t=e.getCities,r=e.filterCities,c=e.newCities,s=e.loading,i=e.setLoading;Object(a.useEffect)((function(){i(!0),t()}),[i,t]),Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v,{}),Object(n.jsxs)("div",{className:"cities_page",children:[Object(n.jsx)("h3",{children:"Cities"}),Object(n.jsx)("input",{id:"search",type:"text",placeholder:"Find your City!",onChange:function(e){var t=e.target.value;r(t)}}),e.loggedUser&&Object(n.jsx)(u.b,{to:"/addCity",children:Object(n.jsx)("p",{className:"btn_add",children:"Add City +"})}),s&&0===c.length&&Object(n.jsx)(E.a,{loading:s,color:"brown",size:20}),Object(n.jsx)(L,{cities:c}),0===c.length&&!1===s&&Object(n.jsx)(U,{}),Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)("button",{className:"back",children:"Back to Home"})})]})]})})),F=r(43),B=r(44),G=r(47),z=r(46),D=function(){return Object(n.jsxs)("nav",{children:[Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)("p",{children:"Home"})}),Object(n.jsx)(u.b,{to:"/cities",children:Object(n.jsx)("p",{children:"Cities"})})]})},H=function(e){Object(G.a)(r,e);var t=Object(z.a)(r);function r(){return Object(F.a)(this,r),t.apply(this,arguments)}return Object(B.a)(r,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"top_footer",children:[Object(n.jsx)("div",{className:"logo_footer"}),Object(n.jsx)(D,{})]})}}]),r}(a.Component),Y=function(){return Object(n.jsxs)("footer",{children:[Object(n.jsx)(H,{}),Object(n.jsx)("p",{children:"Copyright 2021 MYtinerary | All rights reserved"})]})},R=function(){return Object(n.jsxs)("header",{style:{backgroundImage:"url(../assets/fondo_mapa3.jpg)",backgroundSize:"contain"},children:[Object(n.jsx)(d,{}),Object(n.jsx)(y,{})]})},M={itinerariesByCity:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("https://mytinerary-api.herokuapp.com/api/".concat(e,"/itineraries"));case 3:a=t.sent,r({type:"ALL_CITY_ITINERARIES",payload:a.data.response}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),setTimeout((function(){O.a.fire("Error, back to Home"),window.location.href="/"}),5e3);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()},setLoading:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(r,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"LOADING",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},add_comment:function(e,t){return function(){var r=Object(p.a)(b.a.mark((function r(n,a){var c,s,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=a().user.loggedUser?a().user.loggedUser.token:"",r.prev=1,r.next=4,h.a.post("https://mytinerary-api.herokuapp.com/api/itineraries/".concat(t),{newComment:e},{headers:{Authorization:"Bearer ".concat(c)}});case 4:if(!(s=r.sent).data.success){r.next=8;break}return n({type:"CHANGES",payload:s.data.itinerary}),r.abrupt("return",s);case 8:r.next=19;break;case 10:if(r.prev=10,r.t0=r.catch(1),!r.t0.response){r.next=18;break}if(401!==r.t0.response.status){r.next=16;break}return i={error:"Please Login to Comment"},r.abrupt("return",i);case 16:r.next=19;break;case 18:return r.abrupt("return",r.t0);case 19:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e,t){return r.apply(this,arguments)}}()},editComment:function(e,t,r){return function(){var n=Object(p.a)(b.a.mark((function n(a,c){var s,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.put("https://mytinerary-api.herokuapp.com/api/itineraries/".concat(e,"/").concat(t),{editedComment:r});case 3:if(!(s=n.sent).data.success){n.next=7;break}return a({type:"CHANGES",payload:s.data.itinerary}),n.abrupt("return",s);case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),i={errores:{details:[{message:"An error occurred"}]}},n.abrupt("return",i);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteComment:function(e,t){return function(){var r=Object(p.a)(b.a.mark((function r(n,a){var c,s;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.delete("https://mytinerary-api.herokuapp.com/api/itineraries/".concat(e,"/").concat(t));case 3:if(!(c=r.sent).data.success){r.next=7;break}return n({type:"CHANGES",payload:c.data.itinerary}),r.abrupt("return",c);case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),s={errores:{details:[{message:"An error occurred"}]}},r.abrupt("return",s);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e,t){return r.apply(this,arguments)}}()},setLike:function(e,t){return function(){var r=Object(p.a)(b.a.mark((function r(n,a){var c,s,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=a().user.loggedUser._id,"true"!==t){r.next=16;break}return r.prev=2,r.next=5,h.a.post("https://mytinerary-api.herokuapp.com/api/likes/".concat(e),{idUser:c});case 5:if(!(s=r.sent).data.success){r.next=9;break}return n({type:"CHANGES",payload:s.data.itinerary}),r.abrupt("return",s);case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(2),r.abrupt("return",r.t0);case 14:r.next=28;break;case 16:return r.prev=16,r.next=19,h.a.delete("https://mytinerary-api.herokuapp.com/api/likes/".concat(e),{data:{idUser:c}});case 19:if(!(i=r.sent).data.success){r.next=23;break}return n({type:"CHANGES",payload:i.data.itinerary}),r.abrupt("return",i);case 23:r.next=28;break;case 25:return r.prev=25,r.t1=r.catch(16),r.abrupt("return",r.t1);case 28:case"end":return r.stop()}}),r,null,[[2,11],[16,25]])})));return function(e,t){return r.apply(this,arguments)}}()}},W={editComment:M.editComment,deleteComment:M.deleteComment},J=Object(l.b)((function(e){return{loggedUser:e.user.loggedUser}}),W)((function(e){var t=e.single_comment,r=t.idUser,c=t.comment,s=t._id,o=Object(a.useState)(!1),u=Object(i.a)(o,2),l=u[0],d=u[1],j=Object(a.useState)(c),m=Object(i.a)(j,2),h=m[0],f=m[1],x=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.a.fire({title:"Are you sure?",width:"300",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var t=Object(p.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isConfirmed){t.next=5;break}return t.next=3,e.deleteComment(e.idItinerary,s);case 3:t.sent.data.errores&&O.a.fire("Error");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.editComment(e.idItinerary,s,h);case 2:t.sent.data.errores?O.a.fire("Error"):d(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"single_comment",children:[Object(n.jsxs)("div",{className:"user_comment",children:[Object(n.jsx)("div",{style:{backgroundImage:"url(".concat(r.userPic,")")}}),Object(n.jsx)("p",{children:"".concat(r.name," ").concat(r.lastName," said:")})]}),Object(n.jsxs)("div",{className:"controls",children:[l?Object(n.jsxs)("div",{className:"edit_comment",children:[Object(n.jsx)("textarea",{col:"2",onChange:function(){f(document.getElementById("edited_comment").value)},id:"edited_comment",value:h}),Object(n.jsx)("button",{className:"fas fa-share",onClick:g,children:Object(n.jsx)("span",{children:"Send"})})]}):Object(n.jsx)("p",{children:c}),e.loggedUser&&e.loggedUser._id===r._id&&Object(n.jsxs)("div",{className:"btn_controls",children:[Object(n.jsx)("button",{onClick:x,className:"far fa-trash-alt"}),Object(n.jsx)("button",{onClick:function(){return d(!0)},className:"fas fa-edit"})]})]})]})})),q={add_comment:M.add_comment},V=Object(l.b)(null,q)((function(e){var t=e.activities,r=e.comments,c=e.idItinerary,s=e.add_comment,o=Object(a.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],j=function(){var e=Object(p.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==l.trim()){e.next=5;break}O.a.fire("You cannot send an empty comment!"),e.next=9;break;case 5:return e.next=7,s(l,c);case 7:(r=e.sent).error?O.a.fire(r.error):d("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"more_info",children:[Object(n.jsx)("h5",{children:"Activities"}),Object(n.jsx)("div",{className:"activities_list",children:t.map((function(e){return Object(n.jsx)("div",{className:"activity",style:{backgroundImage:"url(".concat(e.activityPic,")"),backgroundSize:"cover"},children:Object(n.jsx)("h6",{children:e.activityName})},e._id)}))}),Object(n.jsx)("h5",{children:"Comments"}),Object(n.jsxs)("div",{className:"comments",children:[r.map((function(e){return Object(n.jsx)(J,{single_comment:e,idItinerary:c},e._id)})),Object(n.jsxs)("div",{className:"commentary",children:[Object(n.jsx)("input",{className:"input_comment",value:l,onChange:function(e){d(e.target.value)},type:"text",placeholder:"Comment here"})," ",Object(n.jsx)("button",{type:"submit",onClick:j,className:"fas fa-share",children:Object(n.jsx)("span",{children:"Send"})})]})]})]})})),$=function(e){var t=Object(a.useState)(!0),r=Object(i.a)(t,2),c=r[0],s=r[1],o=e.activities,u=e.comments,l=e.idItinerary;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{className:"btn_info",onClick:function(){return s(!c)},children:c?"View More":"View Less"}),!c&&Object(n.jsx)(V,{activities:o,comments:u,idItinerary:l})]})},K={setLoading:M.setLoading,setLike:M.setLike,disLike:M.disLike,itinerariesByCity:M.itinerariesByCity},Q=Object(l.b)((function(e){return{itinerariesList:e.itinerary.newItineraries,loggedUser:e.user.loggedUser,singleCity:e.city.singleCity}}),K)((function(e){var t=function(t){var r=t.target.id,n=t.target.name;e.setLike(r,n).then((function(e){return O.a.fire({icon:"success",width:"200",toast:"true",title:e.data.message,showConfirmButton:!1,timer:1200}),!1})).catch((function(e){O.a.fire("An error ocurred")}))};return Object(n.jsx)("div",{className:"itineraries_list",children:e.itinerariesList.map((function(r){var a=r._id,c=r.title,s=r.userName,i=r.userPic,o=r.likes,u=r.duration,l=r.price,d=r.hashtags,j=r.activities,b=r.comments;return Object(n.jsxs)("div",{className:"single_itinerary",children:[Object(n.jsx)("h5",{children:c}),Object(n.jsxs)("div",{className:"center_itinerary",children:[Object(n.jsxs)("div",{className:"user",children:[Object(n.jsx)("div",{className:"user_pic",style:{backgroundImage:"url(".concat(i,")"),backgroundSize:"cover",backgroundPosition:"center"},children:" "}),Object(n.jsx)("h6",{children:"".concat(s)})]}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsxs)("div",{className:"info_data",children:[Object(n.jsxs)("div",{className:"likes",children:[Object(n.jsx)("p",{children:"".concat(o.length," ")}),e.loggedUser?Object(n.jsx)("button",{id:a,onClick:t,className:o.includes(e.loggedUser._id)?"fas fa-heart red":"far fa-heart",name:o.includes(e.loggedUser._id)?"false":"true"}):Object(n.jsx)("i",{className:"far fa-heart"})]}),Object(n.jsx)("p",{children:"Duration: ".concat(u," hs")}),Object(n.jsx)("p",{children:" $".repeat(l)})]}),Object(n.jsx)("div",{className:"info_data",children:d.map((function(e,t){return Object(n.jsx)("p",{children:"#".concat(e)},"".concat(t,"p"))}))})]})]}),Object(n.jsx)($,{activities:j,comments:b,idItinerary:a})]},a)}))})})),X={getCities:S.getCities,getCityById:S.getCityById,itinerariesByCity:M.itinerariesByCity,setLoading:M.setLoading},Z=Object(l.b)((function(e){return{city:e.city.singleCity,itinerariesList:e.itinerary.itineraries,loading:e.itinerary.loading,loggedUser:e.user.loggedUser}}),X)((function(e){var t=e.match.params.id,r=e.getCities,c=e.getCityById,s=e.itinerariesByCity,i=e.city,o=e.itinerariesList,l=e.loading,d=e.setLoading;return Object(a.useEffect)((function(){d(!0),r().then((function(){c(t),s(t)}))}),[t,d,r,c,s]),Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.jsxs)("div",{className:"itineraries_page",children:[Object(n.jsx)(R,{}),Object(n.jsx)("h3",{children:"Itineraries"}),i&&o?Object(n.jsxs)("div",{className:"city_itineraries",style:{backgroundImage:"url(".concat(i.cityPic,")"),backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center"},children:[Object(n.jsx)("h5",{children:e.city.cityName}),Object(n.jsx)("div",{className:"itineraries",children:!0===l?Object(n.jsx)(E.a,{loading:l,color:"brown",size:25}):0===o.length?Object(n.jsx)("h4",{children:"No itineraries yet. Make one!"}):Object(n.jsx)(Q,{})}),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)(u.b,{to:"/cities",children:Object(n.jsx)("button",{className:"back",children:"Back to Cities"})}),Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)("button",{className:"back",children:"Back to Home"})})]})]}):Object(n.jsxs)("div",{className:"itineraries",children:[" ",Object(n.jsx)("h1",{className:"error",children:"Please go Back to Home or Cities"})]})]})})),ee=r(19),te=r(5),re={addCity:S.addCity},ne=Object(l.b)(null,re)((function(e){var t=Object(a.useState)(),r=Object(i.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)({cityName:"",cityPic:"",cityCountry:""}),u=Object(i.a)(o,2),l=u[0],d=u[1],j=function(e){var t=e.target.name,r=e.target.value;d(Object(te.a)(Object(te.a)({},l),{},Object(ee.a)({},t,r)))},m=function(){var t=Object(p.a)(b.a.mark((function t(r){var n,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=l.cityName,a=l.cityPic,c=l.cityCountry,""!==n&&""!==a&&""!==c){t.next=5;break}return s("All required(*) fields must be completed"),t.abrupt("return",!1);case 5:return t.next=7,e.addCity(l);case 7:t.sent.data.success?(O.a.fire("City Added"),e.history.push("/cities")):O.a.fire("An error ocurred");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"cities_page",children:[Object(n.jsx)(v,{}),Object(n.jsx)("h3",{children:"Add City"}),Object(n.jsxs)("form",{className:"add_city",children:[Object(n.jsx)("h6",{children:"Complete your new city"}),Object(n.jsxs)("label",{htmlFor:"cityName",children:[Object(n.jsx)("i",{className:"fas fa-map-signs"}),Object(n.jsx)("input",{type:"text",name:"cityName",placeholder:"City Name*",onChange:j})]}),Object(n.jsxs)("label",{htmlFor:"cityPic",children:[Object(n.jsx)("i",{className:"fas fa-camera"}),Object(n.jsx)("input",{type:"text",name:"cityPic",placeholder:"City Photo*",onChange:j})]}),Object(n.jsxs)("label",{htmlFor:"cityCountry",children:[Object(n.jsx)("i",{className:"fas fa-globe-americas"}),Object(n.jsx)("input",{type:"text",name:"cityCountry",placeholder:"Country*",onChange:j})]}),Object(n.jsx)("button",{className:"back",onClick:m,type:"submit",children:"Submit"}),Object(n.jsx)("p",{children:c&&c})]})]})})),ae=function(e){var t=Object(a.useState)([]),r=Object(i.a)(t,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){fetch("https://restcountries.eu/rest/v2/all").then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),Object(n.jsxs)("select",{id:"country",name:"country",onChange:e.readForm,children:[Object(n.jsx)("option",{value:"",children:"Country*"}),c.map((function(e,t){return Object(n.jsx)("option",{value:e.name,children:e.name},t)}))]})},ce=r(25),se={createNewUser:x.createNewUser},ie=Object(l.b)(null,se)((function(e){var t=e.createNewUser,r=Object(a.useState)({username:"",password:"",name:"",lastName:"",country:""}),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)([]),d=Object(i.a)(l,2),j=d[0],m=d[1],h=function(e){var t=e.target.name,r=e.target.value;o(Object(te.a)(Object(te.a)({},s),{},Object(ee.a)({},t,r)))},f=function(){var r=Object(p.a)(b.a.mark((function r(n){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.error){r.next=4;break}O.a.fire("Error in Sign Up"),r.next=8;break;case 4:return r.next=6,t({username:n.profileObj.email,password:n.googleId,name:n.profileObj.givenName,lastName:n.profileObj.familyName,userPic:n.profileObj.imageUrl,googleUser:!0,country:"Argentina"});case 6:(a=r.sent).errores?m(a.errores.details):(m([]),O.a.fire("Welcome ".concat(a.name)),e.history.push("/"));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var r=Object(p.a)(b.a.mark((function r(n){var a,c,i,o,u,l;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),a=s.username,c=s.password,i=s.name,o=s.lastName,u=s.country,""!==a&&""!==c&&""!==i&&""!==o&&""!==u){r.next=5;break}return m([{message:"All required(*) fields must be completed"}]),r.abrupt("return",!1);case 5:return r.next=7,t(s);case 7:(l=r.sent).errores?m(l.errores.details):(m([]),O.a.fire("Welcome ".concat(l.name)),e.history.push("/"));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(R,{}),Object(n.jsxs)("div",{className:"register",children:[Object(n.jsx)("h3",{children:"Create an Account"}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("label",{htmlFor:"username",children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),Object(n.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Username(email)*",onChange:h})]}),Object(n.jsxs)("label",{htmlFor:"password",children:[Object(n.jsx)("i",{className:"fas fa-lock"}),Object(n.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password*",onChange:h})]}),Object(n.jsxs)("label",{htmlFor:"name",children:[Object(n.jsx)("i",{className:"far fa-user-circle"}),Object(n.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name*",onChange:h})]}),Object(n.jsxs)("label",{htmlFor:"lastName",children:[Object(n.jsx)("i",{className:"fas fa-user-circle"}),Object(n.jsx)("input",{type:"text",name:"lastName",id:"lastName",placeholder:"Last Name*",onChange:h})]}),Object(n.jsxs)("label",{htmlFor:"userPic",children:[Object(n.jsx)("i",{className:"fas fa-camera"}),Object(n.jsx)("input",{type:"text",name:"userPic",id:"userPic",placeholder:"User Photo",onChange:h})]}),Object(n.jsxs)("label",{htmlFor:"country",children:[Object(n.jsx)("i",{className:"fas fa-globe-americas"}),Object(n.jsx)(ae,{readForm:h})]}),Object(n.jsx)("button",{className:"back",onClick:x,type:"submit",children:"Submit"}),j&&j.map((function(e,t){return Object(n.jsx)("p",{className:"errors",children:e.message},t)})),Object(n.jsx)(ce.GoogleLogin,{className:"btn_google",clientId:"801455530732-u3v9b8l6s48ctj7nui20nn724mahsoff.apps.googleusercontent.com",buttonText:"Create Account",onSuccess:f,onFailure:f,cookiePolicy:"single_host_origin"}),Object(n.jsx)(u.b,{to:"/login",children:Object(n.jsx)("p",{className:"btn_p",children:"Do you already have an account? Log in here"})})]})]})]})})),oe={login_user:x.login_user},ue=Object(l.b)(null,oe)((function(e){var t=Object(a.useState)({username:"",password:""}),r=Object(i.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),d=l[0],j=l[1],m=function(e){var t=e.target.name,r=e.target.value;s(Object(te.a)(Object(te.a)({},c),{},Object(ee.a)({},t,r)))},h=function(){var t=Object(p.a)(b.a.mark((function t(r){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.error){t.next=4;break}O.a.fire("Error in Login"),t.next=8;break;case 4:return t.next=6,e.login_user({username:r.profileObj.email,password:r.googleId,login_google:!0});case 6:(n=t.sent).errores?j(n.errores.details):(j([]),O.a.fire("Welcome ".concat(n.name)),e.history.push("/"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(p.a)(b.a.mark((function t(r){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),""!==c.name&&""!==c.password){t.next=4;break}return j([{message:"All fields must be completed"}]),t.abrupt("return",!1);case 4:return t.next=6,e.login_user(c);case 6:(n=t.sent).errores?j(n.errores.details):(j([]),O.a.fire("Welcome ".concat(n.name)),e.history.push("/"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(R,{}),Object(n.jsxs)("div",{className:"register",children:[Object(n.jsx)("h3",{children:"Log In"}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("label",{htmlFor:"username",children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),Object(n.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Username(email)",onChange:m})]}),Object(n.jsxs)("label",{htmlFor:"password",children:[Object(n.jsx)("i",{className:"fas fa-lock"}),Object(n.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:m})]}),Object(n.jsx)("button",{className:"back",onClick:f,type:"submit",children:"Log In"}),d&&d.map((function(e,t){return Object(n.jsx)("p",{className:"errors",children:e.message},t)})),Object(n.jsx)(ce.GoogleLogin,{className:"btn_google",clientId:"801455530732-u3v9b8l6s48ctj7nui20nn724mahsoff.apps.googleusercontent.com",buttonText:"Login whith Google",onSuccess:h,onFailure:h,cookiePolicy:"single_host_origin"}),Object(n.jsx)(u.b,{to:"/register",children:Object(n.jsx)("p",{className:"btn_p",children:"Don't have account? Create one!"})})]})]})]})}));var le={login_LS:x.login_LS},de=Object(l.b)((function(e){return{loggedUser:e.user.loggedUser}}),le)((function(e){var t=e.loggedUser,r=e.login_LS,c=Object(a.useState)(!1),s=Object(i.a)(c,2),l=s[0],d=s[1],j=null;return t?j=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",component:I}),Object(n.jsx)(o.a,{path:"/cities",component:T}),Object(n.jsx)(o.a,{path:"/itineraries/:id",component:Z}),Object(n.jsx)(o.a,{path:"/addCity",component:ne})]}):localStorage.getItem("token")?r(localStorage.getItem("token")).then((function(e){"/"===e&&d(!l)})).catch((function(e){return d(!l)})):j=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",component:I}),Object(n.jsx)(o.a,{path:"/cities",component:T}),Object(n.jsx)(o.a,{path:"/itineraries/:id",component:Z}),Object(n.jsx)(o.a,{path:"/register",component:ie}),Object(n.jsx)(o.a,{path:"/login",component:ue})]}),Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(o.c,{children:j}),Object(n.jsx)(Y,{})]})})})),je=r(21),be=r(45),pe={cities:[],filteredCities:[],singleCity:{},loading:""};var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_CITIES":return Object(te.a)(Object(te.a)({},e),{},{cities:t.payload,filteredCities:t.payload,loading:!1});case"FILTER_CITIES":return Object(te.a)(Object(te.a)({},e),{},{filteredCities:e.cities.filter((function(e){return 0===e.cityName.toUpperCase().indexOf(t.payload.toUpperCase().trim())}))});case"NEW_CITY":return Object(te.a)(Object(te.a)({},e),{},{newCity:t.payload});case"SINGLE_CITY":return Object(te.a)(Object(te.a)({},e),{},{singleCity:e.cities.find((function(e){return e._id===t.payload})),loading:!1});case"LOADING":return Object(te.a)(Object(te.a)({},e),{},{loading:t.payload});default:return e}},he={itineraries:[],newItineraries:[],loading:""};var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_CITY_ITINERARIES":return Object(te.a)(Object(te.a)({},e),{},{itineraries:t.payload,newItineraries:t.payload,loading:!1});case"LOADING":return Object(te.a)(Object(te.a)({},e),{},{loading:t.payload});case"CHANGES":return Object(te.a)(Object(te.a)({},e),{},{loading:!1,newItineraries:e.newItineraries.map((function(e){return e._id===t.payload._id?e=t.payload:e}))});default:return e}},Oe={loggedUser:null,itineraryModified:{}};var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("name",t.payload.name),localStorage.setItem("userPic",t.payload.userPic),localStorage.setItem("token",t.payload.token),Object(te.a)(Object(te.a)({},e),{},{loggedUser:t.payload});case"LOGOUT":return localStorage.clear(),Object(te.a)(Object(te.a)({},e),{},{loggedUser:null});default:return e}},ge=Object(je.c)({city:me,itinerary:fe,user:xe}),ye=Object(je.d)(ge,Object(je.a)(be.a));s.a.render(Object(n.jsx)(l.a,{store:ye,children:Object(n.jsx)(de,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.ceeb4c0d.chunk.js.map